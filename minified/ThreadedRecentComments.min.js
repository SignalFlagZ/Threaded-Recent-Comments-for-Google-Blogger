!function($){$.fn.ThreadedRecentComments=function(options){var version="2.30",powered="Threaded Recent Comments Ver.2.30 by <a href='https://signal-flag-z.blogspot.com/'>Signal Flag Z</a>";if(options.yourURL){var defaults={itemCount:5,daysNew:7,isMobile:!1,feedURL:options.yourURL+"feeds/comments/default",timeout:15e3};options=jQuery.extend(defaults,options);var settings=jQuery.extend(options,{ajaxData:{alt:"json-in-script","max-results":options.itemCount}});settings.itemCount>150&&(settings.itemCount=150);var results={};return results.jQThis=this,this.each((function(){TRC_GetRssFeed(results)}))}function TRC_GetRssFeed(results){jQuery.ajax({timeout:settings.timeout,url:settings.feedURL,data:settings.ajaxData,dataType:"jsonp"}).done((function(data,textStatus,jqXHR){results.json=data,results.CommList=TRC_makeCommentsArray(results),results.html=TRC_buildThreadedRecentCommments(results)})).fail((function(jqXHR,textStatus,errorThrown){var err="";switch(textStatus){case"parsererror":err="Requested JSON parse failed.";break;case"timeout":err="Time out error.";break;case"abort":err="Request aborted.";break;default:err="Uncaught Error."}results.html=err})).always((function(data,textStatus){jQuery(results.jQThis).html(results.html),setCSS()}))}function setCSS(){null!=settings.cssTRC&&jQuery(".ThreadedRecentComments").css(settings.cssTRC),null!=settings.cssPostTitle&&jQuery(".ThreadedRecentComments  .postTitle").css(settings.cssPostTitle),null!=settings.cssCommentThread&&jQuery(".ThreadedRecentComments  .commentThread").css(settings.cssCommentThread),null!=settings.cssParentPostedby&&jQuery(".ThreadedRecentComments .parent .postedby").css(settings.cssParentPostedby),null!=settings.cssChildPostedby&&jQuery(".ThreadedRecentComments .child .postedby").css(settings.cssChildPostedby),null!=settings.cssParentCommentBaloon&&jQuery(".ThreadedRecentComments .parent  .commentBaloon").css(settings.cssParentCommentBaloon),null!=settings.cssChildCommentBaloon&&jQuery(".ThreadedRecentComments .child .commentBaloon").css(settings.cssChildCommentBaloon)}function TRC_makeCommentsArray(results){var CommList={};return jQuery(results.json.feed.entry).each((function(count){var D="",IsPage=!1,CommID=this.id.$t.match(/[0-9]*$/),entryID,entryID;if((CommID=null!=CommID?CommID[0]:"","thr$in-reply-to"in this)&&(entryID=(entryID=this["thr$in-reply-to"].ref.match(/[0-9]*$/))[0],null==CommList[entryID]&&(CommList[entryID]={},CommList[entryID].href=this["thr$in-reply-to"].href),null==CommList[entryID][CommID])){CommList[entryID][CommID]={},-1!=this["thr$in-reply-to"].href.indexOf("blogspot.com/p/")&&(IsPage=!0);var postFeed=settings.yourURL+"feeds/posts/default/"+entryID;IsPage&&(postFeed=settings.yourURL+"feeds/pages/default/"+entryID),jQuery.ajax({data:settings.ajaxData,timeout:settings.timeout,url:postFeed,dataType:"jsonp"}).done((function(data,textStatus,jqXHR){CommList[entryID].title=data.entry.title.$t})).fail((function(jqXHR,textStatus,errorThrown){var err="";switch(textStatus){case"parsererror":err="Requested JSON parse failed.";break;case"timeout":err="Time out error.";break;case"abort":err="Request aborted.";break;default:err="Uncaught Error."}CommList[entryID].title="Unknown title. "+err})).always((function(data,textStatus){jQuery(results.jQThis).find("#"+entryID).html(CommList[entryID].title)}))}"thr$in-reply-to"in this?CommList[entryID]["reply-to"]=this["thr$in-reply-to"].href:(CommList[entryID="NotExist"]={},CommList[entryID][CommID]={},CommList[entryID]["reply-to"]="");CommList[entryID][CommID].ID=CommID,CommList[entryID][CommID].href="",CommList[entryID][CommID].parent="",CommList[entryID][CommID].title=this.title.$t,CommList[entryID][CommID].author={},CommList[entryID][CommID].author.name=this.author[0].name.$t,null!=this.author[0].uri&&(CommList[entryID][CommID].author.uri=this.author[0].uri.$t),CommList[entryID][CommID].author.image=this.author[0].gd$image.src,D=this.updated.$t.match(/(\d+)-(\d+)-(\d+)T(\d+):(\d+):(\d+)\.(\d{3})([+-])(\d+):(\d+)/),CommList[entryID][CommID].Date=new Date(D[1],D[2]-1,D[3],D[4],D[5],D[6],D[7]);for(var i=0;i<this.link.length;++i)switch(this.link[i].rel){case"alternate":var hf=this.link[i].href;CommList[entryID][CommID].href=hf;break;case"related":var pid=this.link[i].href.match(/[0-9]*$/);CommList[entryID][CommID].parent=pid[0],null==CommList[entryID][pid[0]]&&(CommList[entryID][pid[0]]={},CommList[entryID][pid[0]].ID=pid[0],CommList[entryID][pid[0]].parent="",CommList[entryID][pid[0]].href="",CommList[entryID][pid[0]].title="&hellip;",CommList[entryID][pid[0]].Date="",CommList[entryID][pid[0]].author={},CommList[entryID][pid[0]].author.name="&hellip;",CommList[entryID][pid[0]].author.uri="",CommList[entryID][pid[0]].author.image=""),null==CommList[entryID][pid[0]].children&&(CommList[entryID][pid[0]].children={}),CommList[entryID][pid[0]].children[CommID]=CommID}})),CommList}function TRC_buildThreadedRecentCommments(results){var quoteL="&ldquo;",quoteR="&rdquo;",frag=document.createDocumentFragment(),ele=document.createElement("div");ele.setAttribute("class","ThreadedRecentComments");var Tier1=frag.appendChild(ele);(ele=document.createElement("div")).setAttribute("class","threadList");var Tier2=Tier1.appendChild(ele);for(var i in(ele=document.createElement("div")).setAttribute("class","powered"),ele.innerHTML=powered,Tier1.appendChild(ele),results.CommList){results.isMobile&&(results.CommList[i]["reply-to"]+="?m=1"),(ele=document.createElement("div")).setAttribute("class","postTitle");var Tier3=Tier2.appendChild(ele);(ele=document.createElement("div")).setAttribute("class","postTitleText");var Tier4=Tier3.appendChild(ele);(ele=document.createElement("a")).setAttribute("href",results.CommList[i]["reply-to"]);var Tier5=Tier4.appendChild(ele);(ele=document.createElement("span")).setAttribute("id",i),ele.textContent="Loading... or Maybe Deleted.";var Tier6=Tier5.appendChild(ele);for(var j in results.CommList[i])if(""==results.CommList[i][j].parent){(ele=document.createElement("div")).setAttribute("class","commentThread"),Tier4=Tier3.appendChild(ele),(ele=document.createElement("div")).setAttribute("class","parent clearfloat"),Tier5=Tier4.appendChild(ele),ele=commentDOM(results,i,j),Tier6=Tier5.appendChild(ele);var auth=results.CommList[i][j].author.name;if(void 0!==results.CommList[i][j].children){var cf=document.createDocumentFragment();if("&hellip;"==auth){var l=Object.keys(results.CommList[i][j].children).length,pid=Object.keys(results.CommList[i][j].children)[l-1];auth=results.CommList[i][pid].author.name}for(var k in results.CommList[i][j].children)ele=document.createElement("div"),results.CommList[i][k].author.name==auth?ele.setAttribute("class","parent clearfloat"):ele.setAttribute("class","child clearfloat"),Tier5=cf.insertBefore(ele,cf.firstChild),ele=commentDOM(results,i,k),Tier6=Tier5.appendChild(ele);Tier5=Tier4.appendChild(cf)}}}return frag}function commentDOM(results,i,j){var ret=document.createDocumentFragment(),ele=document.createElement("span");ele.setAttribute("class","comment");var Tier1=ret.appendChild(ele);if(Date.now()-results.CommList[i][j].Date<864e5*settings.daysNew){(ele=document.createElement("span")).setAttribute("class","new"),ele.textContent="New!";var Tier2=Tier1.appendChild(ele)}(ele=document.createElement("span")).setAttribute("class","commentBaloon");var Tier2=Tier1.appendChild(ele);if((ele=document.createElement("span")).setAttribute("class","commentTxt"),""==results.CommList[i][j].href)ele.innerHTML=results.CommList[i][j].title;else{results.isMobile&&(results.CommList[i][j].href=results.CommList[i][j].href.replace(/showComment=/,"m=1&showComment="));var ele2=document.createElement("a");ele2.setAttribute("href",results.CommList[i][j].href),ele2.innerHTML=results.CommList[i][j].title,ele.appendChild(ele2)}var Tier3=Tier2.appendChild(ele);return(ele=document.createElement("span")).setAttribute("class","postedby"),Tier2=Tier1.appendChild(ele),(ele=document.createElement("img")).setAttribute("src",results.CommList[i][j].author.image),Tier2.appendChild(ele),(ele=document.createElement("span")).setAttribute("class","auth"),ele.innerHTML="["+results.CommList[i][j].author.name+"] ",Tier2.appendChild(ele),(ele=document.createElement("span")).setAttribute("class","date"),ele.textContent=results.CommList[i][j].Date.toLocaleString(),Tier2.appendChild(ele),ret}this.html("Set yourURL.")}}(jQuery);